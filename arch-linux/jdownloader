# DO NOT MODIFY THIS AUTOGENERATED FILE
# Change it in m4 folder
FROM sandrokeil/archlinux:latest
RUN echo "[multilib]" >> /etc/pacman.conf \
    && echo "Include = /etc/pacman.d/mirrorlist" >> /etc/pacman.conf \
    && pacman -Sly multilib \
    && pacman -Sy --noconfirm jre10-openjdk wget bash hicolor-icon-theme unzip shared-mime-info desktop-file-utils fontconfig ttf-dejavu p7zip unrar
RUN pacman -Sy --noconfirm sudo fakeroot patch gzip git gcc make pkg-config diffutils automake autoconf file \
    && useradd builduser -m \
    && passwd -d builduser \
    && printf "builduser ALL=(ALL) ALL\n" | tee -a /etc/sudoers \
    && sudo -u builduser bash -c "mkdir -p ~/tmp && curl -L https://aur.archlinux.org/cgit/aur.git/snapshot/phantomjs-bin.tar.gz | tar xzf - --strip-components=1 -C ~/tmp" \
    && sudo -u builduser bash -c "cd ~/tmp && makepkg -si --noconfirm " \
    && sudo -u builduser bash -c "mkdir -p ~/tmp2 && curl -L https://aur.archlinux.org/cgit/aur.git/snapshot/jdownloader2.tar.gz | tar xzf - --strip-components=1 -C ~/tmp2" \
    && sudo -u builduser bash -c "cd ~/tmp2 && makepkg -si --noconfirm " \
    && userdel -r builduser \
    && pacman -Rs --noconfirm git gcc make autoconf automake \
    && pacman -Scc --noconfirm 
ENTRYPOINT ["JDownloader"]
