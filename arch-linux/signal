# DO NOT MODIFY THIS AUTOGENERATED FILE
# Change it in m4 folder
FROM sandrokeil/archlinux:latest
COPY arch-aur-install /usr/bin
RUN echo "[multilib]" >> /etc/pacman.conf \
    && echo "Include = /etc/pacman.d/mirrorlist" >> /etc/pacman.conf \
    && pacman -Sl multilib \
    && pacman -Syu --noconfirm gconf gtk2 libnotify libxtst nss xdg-utils libxss
RUN pacman -Syu --needed --noconfirm sudo patch \
    && useradd builduser -m \
    && passwd -d builduser \
    && printf 'builduser ALL=(ALL) ALL\n' | tee -a /etc/sudoers \
    && sudo -u builduser bash -c 'cd ~ && mkdir tmp && cd tmp && arch-aur-install https://aur.archlinux.org/cgit/aur.git/snapshot/signal-desktop-bin.tar.gz' \
    && userdel -r builduser \
    && pacman -Scc --noconfirm
ENTRYPOINT ["signal-desktop"]
